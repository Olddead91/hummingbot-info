# 0x Protocol

## Overview

0x is a professional-grade DEX aggregator that combines on-chain liquidity with off-chain RFQ (Request for Quote) systems from professional market makers, providing institutional-grade execution quality.

**Chain:** Ethereum and EVM-compatible chains  
**Trading Types:** Router  
**Networks:** mainnet, arbitrum, optimism, base, polygon, avalanche, bsc

## Features

- RFQ system for better prices from professional market makers
- Smart order routing across multiple DEXs
- MEV protection through private market maker pools
- Gasless trading support via meta-transactions
- Slippage protection with guaranteed quotes
- Multi-chain support with consistent API

## Configuration

Configure 0x settings in `/conf/connectors/0x.yml`:

```yaml
allowedSlippage: 1.0
gasLimitEstimate: 350000
ttl: 30
apiEndpoint: "https://api.0x.org"
apiKey: null  # Optional API key for higher rate limits
```

### Configuration Parameters

- **allowedSlippage**: Maximum acceptable price slippage percentage
- **gasLimitEstimate**: Estimated gas limit for transactions
- **ttl**: Time-to-live for quotes in seconds
- **apiEndpoint**: 0x API endpoint URL
- **apiKey**: Optional API key for enhanced features and higher rate limits

## API Endpoints

### Router Operations

#### Quote Swap
`POST /connectors/0x/router/quote-swap`

Gets an aggregated quote combining on-chain and RFQ liquidity.

**Request Parameters:**
- `chain`: Chain name (e.g., "ethereum")
- `network`: Network name (e.g., "mainnet")
- `connector`: "0x"
- `base`: Base token symbol
- `quote`: Quote token symbol
- `amount`: Trade amount
- `side`: "BUY" or "SELL"

**Response:**
- `price`: Execution price
- `expectedOut`: Expected output amount
- `sources`: Liquidity sources breakdown
- `gasEstimate`: Estimated gas cost
- `priceImpact`: Expected price impact

#### Execute Swap
`POST /connectors/0x/router/execute-swap`

Executes a swap through 0x aggregation.

**Request Parameters:**
Same as quote-swap, plus:
- `address`: Wallet address
- `slippage`: Optional slippage override

**Response:**
- `txHash`: Transaction hash
- `status`: Transaction status
- `gasUsed`: Actual gas consumed

#### Execute Quote
`POST /connectors/0x/router/execute-quote`

Executes a previously fetched quote for guaranteed execution.

**Request Parameters:**
- `chain`: Chain name
- `network`: Network name
- `connector`: "0x"
- `address`: Wallet address
- `quote`: Quote object from quote-swap

#### Get Price
`GET /connectors/0x/router/get-price`

Gets indicative pricing without generating a full quote.

**Request Parameters:**
- `chain`: Chain name
- `network`: Network name
- `connector`: "0x"
- `base`: Base token symbol
- `quote`: Quote token symbol
- `amount`: Trade amount

## Liquidity Sources

### On-Chain Sources
0x aggregates liquidity from major DEXs:
- Uniswap V2/V3
- SushiSwap
- Curve
- Balancer
- PancakeSwap (BSC)
- QuickSwap (Polygon)
- TraderJoe (Avalanche)

### Off-Chain RFQ
Professional market makers providing quotes:
- Jump Trading
- Jane Street
- Wintermute
- GSR
- Cumberland
- Alameda Research (historical)

## Network-Specific Features

### Ethereum Mainnet
- Deepest liquidity
- Most RFQ providers
- Flashloan integration
- MEV protection

### Layer 2 Networks

#### Arbitrum
- Lower latency quotes
- Reduced gas costs
- Growing RFQ coverage

#### Optimism
- OP token incentives
- Fast finality
- Good DEX coverage

#### Base
- Coinbase ecosystem integration
- New market maker relationships
- Growing liquidity

### Other Chains

#### Polygon
- Very low fees
- Good for small trades
- MATIC pairs focus

#### BSC
- BNB ecosystem
- PancakeSwap integration
- High-speed execution

#### Avalanche
- AVAX native pairs
- TraderJoe integration
- Cross-chain bridges

## Advanced Features

### RFQ System

The Request for Quote system provides:
1. **Better Pricing**: Direct quotes from market makers
2. **Guaranteed Execution**: Firm quotes with no slippage
3. **MEV Protection**: Private order flow
4. **Large Trade Support**: Deep liquidity for size

### Slippage Protection

Multiple layers of protection:
- Pre-trade simulation
- Dynamic slippage calculation
- Revert on excessive slippage
- Alternative route fallback

### Gas Optimization

0x optimizes gas through:
- Efficient routing algorithms
- Contract optimization
- Batch transaction support
- Meta-transaction options

## Trading Strategies

### Arbitrage
Use 0x for:
- Cross-DEX arbitrage
- CEX-DEX arbitrage
- Cross-chain opportunities
- RFQ vs AMM spreads

### Large Trades
Best practices for size:
- Use RFQ for better pricing
- Split orders across sources
- Consider private pools
- Set appropriate slippage

### Cost Optimization
Minimize costs:
- Compare gas estimates
- Use limit orders when possible
- Batch small trades
- Consider L2 networks

## API Key Benefits

With an API key, you get:
- **Higher Rate Limits**: 100 req/s vs 10 req/s
- **Priority Support**: Direct support channel
- **Advanced Features**: Access to exclusive endpoints
- **Analytics**: Detailed execution reports
- **SLA**: Guaranteed uptime and latency

To obtain an API key, visit [0x Dashboard](https://dashboard.0x.org).

## Best Practices

1. **Quote Management**:
   - Refresh quotes before execution
   - Use execute-quote for guarantees
   - Monitor quote expiration

2. **Slippage Settings**:
   - 0.5-1% for liquid pairs
   - 1-3% for medium liquidity
   - 3-5% for exotic pairs
   - Consider RFQ for large trades

3. **Network Selection**:
   - Mainnet for best liquidity
   - L2s for cost optimization
   - Match network to token availability

4. **Error Handling**:
   - Implement retry logic
   - Handle quote expiration
   - Monitor gas price spikes

## Technical Details

- **GitHub**: [Gateway 0x Connector](https://github.com/hummingbot/gateway/tree/development/src/connectors/0x)
- **API Documentation**: [0x API Docs](https://0x.org/docs/api)
- **Developer Portal**: [0x Developer Hub](https://0x.org/docs)
- **Default Config**: [0x.yml template](https://github.com/hummingbot/gateway/blob/development/src/templates/0x.yml)

## Troubleshooting

### Common Issues

**"No liquidity" errors:**
- Check token addresses are correct
- Verify sufficient liquidity exists
- Try smaller trade amounts
- Consider different networks

**"Quote expired" errors:**
- Reduce time between quote and execution
- Use execute-quote immediately
- Increase TTL in configuration

**Rate limiting:**
- Implement exponential backoff
- Consider getting API key
- Batch requests when possible

**Gas estimation failures:**
- Increase gas limit buffer
- Check wallet balance
- Verify token approvals

## Fee Structure

0x protocol fees:
- **No protocol fee**: 0x doesn't charge protocol fees
- **Gas costs**: Standard network gas fees
- **Positive slippage**: Captured by user
- **MEV protection**: Reduces hidden costs

Market maker fees (RFQ):
- Included in quoted price
- Competitive spreads
- No additional charges
- Transparent pricing